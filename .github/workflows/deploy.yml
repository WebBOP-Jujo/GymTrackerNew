# .github/workflows/deploy.yml

name: Deploy to GitHub Pages # Nombre que aparecerÃ¡ en la pestaÃ±a "Actions"

on: # Eventos que dispararÃ¡n este flujo de trabajo
  push: # Se activa cuando haces un 'push'
    branches:
      - main # EspecÃ­ficamente a la rama 'main' (o la que uses como principal, ej: master)

jobs: # Los trabajos (tareas) que se ejecutarÃ¡n
  build-and-deploy: # Nombre de tu trabajo (puedes elegir otro)
    runs-on: ubuntu-latest # El tipo de mÃ¡quina virtual donde se ejecutarÃ¡ (Ubuntu es comÃºn)
    
    permissions: # Permisos necesarios para este trabajo
      contents: write # Esencial para que la acciÃ³n 'peaceiris/actions-gh-pages' pueda escribir en la rama gh-pages

    steps: # Los pasos individuales dentro del trabajo 'build-and-deploy'
      - name: Checkout ğŸ›ï¸ 
        # Este paso descarga tu cÃ³digo del repositorio a la mÃ¡quina virtual
        uses: actions/checkout@v4 # Usa una acciÃ³n predefinida de GitHub

      - name: Set up Node.js ğŸŸ©
        # Configura el entorno de Node.js necesario para instalar dependencias y compilar
        uses: actions/setup-node@v4
        with:
          node-version: '18' # Especifica la versiÃ³n de Node.js (ajusta segÃºn necesites)
          cache: 'npm' # Habilita el cachÃ© para 'npm' para acelerar instalaciones futuras (o 'yarn' si usas yarn)

      - name: Install dependencies ğŸ‘¨â€ğŸ’»
        # Instala las dependencias de tu proyecto listadas en package.json
        run: npm install # O 'yarn install' si usas yarn

      - name: Build ğŸ—ï¸
        # Compila tu aplicaciÃ³n Vite para producciÃ³n
        run: npm run build # Ejecuta el script 'build' de tu package.json
        # env: # SecciÃ³n para variables de entorno si fueran necesarias para la compilaciÃ³n
          # VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
          # VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
          # NOTA: Tus claves de Supabase estÃ¡n actualmente hardcodeadas en constants.ts.
          # Si las movieras a un archivo .env y las accedieras con import.meta.env.VITE_*,
          # necesitarÃ­as configurar "Repository Secrets" en GitHub y referenciarlos aquÃ­.
          # Para tu configuraciÃ³n actual, esta secciÃ³n 'env' no es estrictamente necesaria para las claves.

      - name: Deploy to GitHub Pages ğŸš€
        # Este paso usa una acciÃ³n de la comunidad para desplegar a GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # Token automÃ¡tico proporcionado por GitHub Actions para autenticaciÃ³n
          publish_dir: ./dist # La carpeta que contiene los archivos compilados (tu carpeta 'dist')
          # cname: tudominio.com # Descomenta y configura si tienes un dominio personalizado para GitHub Pages
